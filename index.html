<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="icons/favicon-32x32.png">
    <!-- AerisWeather API Challenge -->
    <script src="https://cdn.aerisapi.com/sdk/js/latest/aerisweather.min.js"></script>
    <link rel="stylesheet" href="https://cdn.aerisapi.com/sdk/js/latest/aerisweather.css">
    <!-- Scripts -->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="aerisstyle.css">
    <!-- <script src="main.js"></script> -->
    <!-- <script src="aerisApiChallenge.js"></script> -->
    <title>Waxxer</title>
</head>

<body>
    <div class="container header">
        <img src="icons/favicon-194x194.png" alt="waxxer logo" style="width: 25px;height:25px">
        <h1>Waxxer</h1>
    </div>
    <div class="container">
        <div class="col-md-12 waxxer-form">
            <div class="wax-sub">

                <div class="aeris-zip-code">
                    <label for="location-zip-code">Location:</label>
                    <br>
                    <div>
                        <input id="inputLocationZIP" class="form-control" placeholder="ZIP code" name="location input">
                        <div><span id="outputZipLocation"></span></div>
                        <div class="location-input"></div>
                    </div>

                    <div>Conditions:
                        <div id="obs"></div>
                    </div>
                </div>

            </div>

            <script>
                window.onload = function() {

                        const target = document.getElementById('obs');
                        const aeris = new AerisWeather('RPWkCaESX2v8UsgEhZSu8', 'NIKctIWAkkEvTHWQsELj51e32qonWWGVS0DZ7OV5');


                        const request = aeris.api().endpoint('observations').place('minneapolis,mn');

                        request.get().then((result) => {
                                    const {
                                        ob
                                    } = result.data;
                                    if (ob) {
                                        const html = (`
                    <p class="timestamp">Last updated at ${aeris.utils.dates.format(new Date(ob.timestamp * 1000), 'h:mm a, MMM D, YYYY')}</p>
                    <div class="cols">
                        <div>
                            <p class="temp">${ob.tempF}<span>&deg;F</span></p>
                            <p class="wx">${ob.weatherPrimary}</p>
                        </div>
                        <div>
                            <img class="icon" src="https://cdn.aerisapi.com/wxblox/icons/${ob.icon || 'na.png'}">
                        </div>
                        <div class="details">
                            <div class="row">
                                <div>Winds</div>
                                <div>${ob.windSpeedMPH > 0 ? `${ob.windSpeedMPH} mph` : `Calm`}</div>
                            </div>
                            <div class="row">
                                <div>Dew Point</div>
                                <div>${ob.dewpointF || 'N/A'}&deg;F</div>
                            </div>
                            <div class="row">
                                <div>Humidity</div>
                                <div>${ob.humidity || 'N/A'}%</div>
                            </div>
                            <div class="row">
                                <div>Pressure</div>
                                <div>${ob.pressureIN || 'N/A'} in.</div>
                            </div>
                            <div class="row">
                                <div>Visibility</div>
                                <div>${ob.visibilityMI || 'N/A'} mi</div>
                            </div>
                            <div class="row">
                                <div>Sky Cover</div>
                                <div>${ob.sky || 'N/A'}%</div>
                            </div>
                        </div>
                    </div>
                `);
                target.innerHTML = html;
            }
        }); 
    };
            </script>

</body>

</html>